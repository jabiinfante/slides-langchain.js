---
layout: default
---

# Human-in-the-Loop

<div class="mt-4 text-xs">

<v-click>

```typescript
import { createAgent, humanInTheLoopMiddleware } from "langchain";
import { Command } from "@langchain/langgraph";
import { MemorySaver } from "@langchain/langgraph";

const agent = createAgent({
  model: "gpt-4o",
  tools: [sendEmailTool, deleteRecordTool],
  checkpointer: new MemorySaver(),
  middleware: [
    humanInTheLoopMiddleware({
      interruptOn: {
        send_email: { allowedDecisions: ["approve", "edit", "reject"] },
        delete_record: { allowedDecisions: ["approve", "reject"] },
      },
    }),
  ],
});

const config = { configurable: { thread_id: "thread-1" } };

// Se pausa antes de ejecutar tools sensibles
let result = await agent.invoke({ messages: [...] }, config);

// Aprobar y continuar
result = await agent.invoke(
  new Command({ resume: { decisions: [{ type: "approve" }] } }), config
);
```

</v-click>

</div>


---
