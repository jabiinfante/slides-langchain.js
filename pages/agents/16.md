---
layout: default
---

# summarizationMiddleware: Resumir Historial

<div class="mt-4 text-xs">

<v-click>

```typescript
import { createAgent, summarizationMiddleware } from "langchain";

const agent = createAgent({
  model: "mistral:mistral-large-latest",
  tools: [searchTool, calculatorTool],
  middleware: [
    summarizationMiddleware({
      model: "mistral:mistral-small-latest",  // Modelo para resumir (más barato)
      trigger: { tokens: 4000 },              // Resumir cuando supere 4000 tokens
      keep: { messages: 20 },                 // Mantener los últimos 20 mensajes
    }),
  ],
});
```

</v-click>

<v-click>

<div class="mt-4 text-xs opacity-80">

**Funcionamiento automático:**

1. Detecta cuando el historial supera el límite de tokens
2. Resume los mensajes antiguos usando el modelo especificado
3. Reemplaza permanentemente los mensajes antiguos por el resumen
4. Mantiene los mensajes recientes intactos para contexto

</div>

</v-click>

</div>
